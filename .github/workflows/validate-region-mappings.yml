name: Validate Region Mappings
# === DO_NOT_EDIT: path-sync header ===
on:
  schedule:
    - cron: '0 8 * * 1'  # Weekly on Monday at 8:00 AM UTC
  workflow_dispatch:

env:
  MONGODB_ATLAS_PROJECT_ID: ${{ vars.MONGODB_ATLAS_PROJECT_ID_SNAPSHOT_TEST }}
  MONGODB_ATLAS_CLIENT_ID: ${{ secrets.MONGODB_ATLAS_CLIENT_ID }}
  MONGODB_ATLAS_CLIENT_SECRET: ${{ secrets.MONGODB_ATLAS_CLIENT_SECRET }}
  MONGODB_ATLAS_BASE_URL: ${{ secrets.MONGODB_ATLAS_BASE_URL }}
# === OK_EDIT: path-sync header ===
# Add module specific env-vars here

jobs:
  # === DO_NOT_EDIT: path-sync job-validate ===
  validate-regions:
    name: Validate Region Mappings
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683

      - uses: ./.github/actions/setup
        with:
          just: 'true'
          uv: 'true'
          terraform: 'true'


      - name: Install Atlas CLI
        run: |
          curl -fsSL https://pgp.mongodb.com/server-7.0.asc | sudo gpg -o /usr/share/keyrings/mongodb-server-7.0.gpg --dearmor
          echo "deb [ signed-by=/usr/share/keyrings/mongodb-server-7.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
          sudo apt-get update
          sudo apt-get install -y mongodb-atlas-cli

  # === OK_EDIT: path-sync job-validate ===
  # ADD GCP/Azure Login and
  # Validate regions here
  #   - name: Validate regions
  #     run: just validate-regions <provider> --output-format variable
