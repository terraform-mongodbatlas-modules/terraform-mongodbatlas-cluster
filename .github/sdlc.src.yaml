# SDLC Sync Configuration
# See contributing/sdlc-sync.md for documentation on how this sync mechanism works
name: sdlc
src_repo_url: https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-cluster
pr_defaults:
  title: 'chore: sync {name} files'
  body_suffix: |
    - This PR was generated by [path-sync](https://github.com/EspenAlbert/path-sync).
    - For details on how this sync mechanism works, see [contributing/sdlc-sync.md](https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-cluster/blob/main/contributing/sdlc-sync.md).
    
    - To merge this PR, only check that the CI Checks are passing, no need to review the changes (they have been approved in the src repo)
    - If you need to make changes, see the [Change Request Options](https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-cluster/blob/main/contributing/sdlc-sync.md#change-request-options) in the SDLC Sync Guide.
    - tl;dr:
    
    1. Changes to any file NOT managed by path-sync is OK
    2. Changes to any file managed by path-sync should be made in the source repository

    How do you know if a file was managed by path-sync?
    
    1. Look at the 1st line of the file, if it has `# path-sync copy -n sdlc` it means it is managed by path-sync
    2. Or look in the src repo for the `.github/sdlc.src.yaml` file that contains the mapping of files to sync.
paths:
  # Python tooling - explicit folders (avoid .venv)
  - src_path: .github/changelog/*.py
  - src_path: .github/changelog/*.txt
    sync_mode: replace
  - src_path: .github/changelog/*.tmpl
    sync_mode: replace
  - src_path: .github/changelog/check-changelog-entry-file/*.go
  - src_path: .github/changelog/check-changelog-entry-file/go.mod
    sync_mode: replace
  - src_path: .github/changelog/check-changelog-entry-file/go.sum
    sync_mode: replace
  - src_path: .github/docs/
  - src_path: .github/release/
  - src_path: .github/pyproject.toml
  - src_path: .github/uv.lock
  - src_path: .github/workspace/
  - src_path: .github/dev/__init__.py
  - src_path: .github/dev/extract_regions.py
  - src_path: .github/dev/test_compat.py
  # NOTE: dev_vars.py is NOT synced - it has module-specific workspace paths
  # Workflows & actions
  - src_path: .github/workflows/
    exclude_file_patterns:
    - cleanup-test-env.yml
    - dev-integration-test.yml
    - pre-release-tests.yml
    - sdlc-copy.yml
  - src_path: .github/workflows_destination/sdlc_validate.yaml
    dest_path: .github/workflows/sdlc-validate.yml
  - src_path: .github/actions/
  # Contributing guides
  - src_path: contributing/sdlc-sync.md
  - src_path: contributing/changelog-process.md
  - src_path: contributing/documentation-guide.md
  - src_path: contributing/README.md
  - src_path: CONTRIBUTING.md
    sync_mode: scaffold
  # GitHub config
  - src_path: .github/CODEOWNERS
  - src_path: .github/pull_request_template.md
  - src_path: .github/ISSUE_TEMPLATE/
  # Justfile with sections
  - src_path: justfile
  - src_path: .pre-commit-config.yaml
  # Terraform docs & config
  - src_path: .terraform-docs.yml
  - src_path: .terraform-versions.yaml
destinations:
  - name: aws
    repo_url: https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-atlas-aws
    dest_path_relative: ../aws
    default_branch: main
  - name: azure
    repo_url: https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-atlas-azure
    dest_path_relative: ../azure
    default_branch: main
  - name: project
    repo_url: https://github.com/terraform-mongodbatlas-modules/terraform-mongodbatlas-project
    dest_path_relative: ../project
    default_branch: main
